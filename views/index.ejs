<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M.Hinako Portfolio</title>
    <link rel="stylesheet" href="/css/style.css">
</head>
<body>
    <header>
        <div style="font-size: 1.5rem;">マツイヒナコ</div>
        <nav>
            <a href="#about">About</a>
            <a href="#purpose">Purpose</a>
            <a href="#brands">Brands</a>
            <a href="#contact">Contact</a>
        </nav>
    </header>

    <main>
        <section class="hero" id="hero">
            <div class="hero-center" id="hero-title">
                <h1>感情を起点に<br>心をほぐすモノをつくる</h1>
                <p style="margin-top:15px; opacity:0.9; font-size:1.7rem">マツイヒナコのポートフォリオサイト</p>
            </div>
        </section>

        <section id="about" class="section-container">
            <h2 class="section-label">ABOUT</h2>
            <div class="about-top">
                <div class="about-img"><img src="/images/DSC02671.png" onerror="this.src='https://via.placeholder.com/500x500';"></div>
                <div class="about-text">
                    <p>北海道旭川市出身。</p>
                    <p>神山まるごと高専在学中の2025年1月、株式会社WAQHAPIを起業。</p>
                    <p>自己受容の難しさと向き合った経験をもとに、内省から生まれた思想を、モノづくりとして実践している。</p>
                </div>
            </div>
            <div class="philosophy-grid">
                <div class="phi-card" onclick="openPopup('人は、光も影もあるから美しい。', '人間も月と同じで、欠けて見えていても実は満ちている。')">
                    <h3>「人は、光も影も<br>あるから美しい。」</h3>
                    <div class="more-link">more ></div>
                </div>
                <div class="phi-card" onclick="openPopup('心をほぐす。', '解決するのではなく、ただ心がふっと安心できる場所を作りたい。')">
                    <h3>「心をほぐす。」</h3>
                    <div class="more-link">more ></div>
                </div>
                <div class="phi-card" onclick="openPopup('daijoubu!', '理屈じゃない安心感を。あなたがあなたでいいのだと伝えたい。')">
                    <h3>「daijoubu!」</h3>
                    <div class="more-link">more ></div>
                </div>
            </div>
        </section>

        <section id="purpose" class="section-container">
            <h2 class="section-label">PURPOSE</h2>
            <div style="max-width: 850px;">
                <h3 style="font-size: 3rem; margin-bottom: 40px; line-height: 1.3;">愛がめぐる世の中をつくる。</h3>
            </div>
                <div class="purpose-text">
                   <p>他者承認ばかりで、承認欲求のために行動してきた私が、その過程で気づいたのは、他者からの承認をもらうこと以上に、自分で自分のことを肯定したかった、抱きしめたかったということでした。</p>
                   <p>自分を思いやることを出発点に、その思いやりを他者に渡していくことで愛をめぐらせ、幸せな社会を作っていきたいと思っています。</p>
                </div>

        </section>

        <!-- STRENGTH & CASE -->
        <section class="section-container">
            <h2 class="section-label">STRENGTH & CASE</h2>
            <div class="note-grid">
                <article class="note-card note-card--accent">
                    <div class="nc-head">
                        <h3>自己内省から行動に移す力</h3>
                        <p class="nc-sub">弱さを言語化し、感情の温度が高いまま「学び→行動」を回すレジリエンス。</p>
                    </div>
                    <div class="nc-tags">
                        <span class="chip">内省</span><span class="chip">ストーリーテリング</span><span class="chip">実行力</span><span class="chip">温度管理</span><span class="chip">編集</span>
                    </div>
                    <div class="nc-steps">
                        <div class="step">
                            <div class="step-dot">1</div>
                            <div class="step-body">
                                <div class="step-title">感情</div>
                                <div class="step-text clamp">承認欲求や弱さを正直に棚卸し、熱が冷めないうちに言葉にする。</div>
                            </div>
                        </div>
                        <div class="step">
                            <div class="step-dot">2</div>
                            <div class="step-body">
                                <div class="step-title">過程</div>
                                <div class="step-text clamp">感情→仮説→小さな実験を素早く回し、共感の種を確かめる。</div>
                            </div>
                        </div>
                        <div class="step">
                            <div class="step-dot">3</div>
                            <div class="step-body">
                                <div class="step-title">今</div>
                                <div class="step-text clamp">温度が高い言葉をコピーに落とし込み、チームを巻き込みながら改善を継続。</div>
                            </div>
                        </div>
                    </div>
                    <div class="nc-now">Now / Next : 感情メモと言葉づくりを続け、次のプロジェクトで検証中。</div>
                </article>

                <article class="note-card">
                    <div class="nc-head">
                        <h3>CASE / パフェに甘えて。</h3>
                        <p class="nc-sub">「ご褒日」を届けるパフェブランド。感情の起点から行動まで一貫してデザイン。</p>
                    </div>
                    <div class="nc-tags">
                        <span class="chip">企画</span><span class="chip">体験設計</span><span class="chip">コピー</span><span class="chip">広報</span><span class="chip">オペレーション</span>
                    </div>
                    <div class="nc-steps">
                        <div class="step">
                            <div class="step-dot">1</div>
                            <div class="step-body">
                                <div class="step-title">感情</div>
                                <div class="step-text clamp">“ご褒美をあげにくい自分”を変えたい想いから着想。ご褒日をパフェで可視化。</div>
                            </div>
                        </div>
                        <div class="step">
                            <div class="step-dot">2</div>
                            <div class="step-body">
                                <div class="step-title">過程</div>
                                <div class="step-text clamp">予約→来場→帰路の前後体験を設計し、導線と温度感を揃えたポップアップを複数開催。</div>
                            </div>
                        </div>
                        <div class="step">
                            <div class="step-dot">3</div>
                            <div class="step-body">
                                <div class="step-title">今</div>
                                <div class="step-text clamp">完売・リピーター実績をもとに、「ご褒日」テンプレを他プロダクトへ横展開準備中。</div>
                            </div>
                        </div>
                    </div>
                    <div class="nc-now">Now / Next : 次回ポップアップ準備とリピーター向け体験改善を実施中。</div>
                </article>
            </div>
        </section>

        <section id="brands" class="section-container">
            <h2 class="section-label">BRANDS</h2>
            <% if (isAdmin) { %>
            <div class="cms-hint">
                <button class="cms-btn" type="button" id="cmsOpenBtn" aria-label="ブランドCMSを開く">＋ CMSで編集</button>
            </div>
            <% } %>
            <p class="brands-lead">
                感情を起点にして、作ってきたブランドたちをご紹介します。<br>
                <span>→</span> をタップすると、ブランドの詳細と過程を覗くことができます。
            </p>


            <div class="brand-grid">
                <% projects.forEach(p => { %>
                    <% const descOverride = p.title === '絵本のおまじない'
                        ? '「大丈夫」をそっと渡す、絵本のギフト。'
                        : p.description || '';
                       const processOverride = p.title === '絵本のおまじない'
                        ? '自分を責めてしまう瞬間に寄り添う言葉を、物語として編み直した。'
                        : p.process || '';
                    %>
                    <div class="brand-card">
                    <div class="brand-card__media">
                        <img src="<%= p.image_url %>" alt="<%= p.title %>">
                    </div>

                    <div class="brand-card__content">
                        <h3 class="brand-card__title"><%= p.title %></h3>
                    </div>

                    <!-- 矢印ボタン：押すとポップアップ -->
                    <button
                        class="brand-go"
                        type="button"
                        aria-label="<%= p.title %> の詳細を開く"
                        data-title="<%= p.title %>"
                        data-desc="<%= descOverride %>"
                        data-process="<%= processOverride %>"
                        data-link="/projects/<%= p.id %>"
                    >→</button>
                    </div>
                <% }) %>
            </div>
        </section>

        <section id="contact" class="section-container">
            <div class="contact-box" style="border: 4px solid var(--text); border-radius: 40px; padding: 60px;">
                <div class="contact-grid">
                    <div>
                        <h2 style="font-size:3.5rem; margin-bottom:20px;">Contact</h2>
                        <p>共創のご相談や、メッセージはこちらから。</p>
                    </div>
                    <form class="contact-form">
                        <input type="text" placeholder="Name">
                        <input type="email" placeholder="Email">
                        <textarea placeholder="Message" rows="4"></textarea>
                        <button type="submit" class="submit-btn">SEND MESSAGE</button>
                    </form>
                </div>
            </div>
        </section>
    </main>

    <div id="popup" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.4); z-index:3000; align-items:center; justify-content:center;" onclick="closePopup()">
        <div class="popup-content" style="padding:60px; max-width:600px; background:var(--card-bg); border: 4px solid var(--text); border-radius: 30px;" onclick="event.stopPropagation()">
            <h3 id="popup-title" style="font-size:2rem; margin-bottom:20px;"></h3>
            <p id="popup-text" style="line-height:2; font-size:1.2rem;"></p>
        </div>
    </div>

    <div class="theme-container">
        <div class="theme-menu">
            <div class="theme-btn" data-theme="">☀️</div>
            <div class="theme-btn" data-theme="theme-night">🌗</div>
            <div class="theme-btn" data-theme="theme-peach">🍑</div>
            <div class="theme-btn" data-theme="theme-mirror">🪞</div>
        </div>
        <div class="theme-trigger" style="border: 4px solid var(--text); border-radius: 50%;">🎨</div>
    </div>

    <script>
  const words = [
    {t:"愛がめぐる世の中", v:false}, {t:"光も影も抱きしめる", v:false},
    {t:"欠けていても満ちている", v:true}, {t:"もう一度、走り出してみようと思った。", v:true},
    {t:"自分を愛してもいいと、許可をあげる", v:false}, {t:"届けたいのは、コトではなく、意志だったから。", v:false},
    {t:"弱くて、ちっぽけな自分", v:true}, {t:"承認欲求が強い。だから起業をした。", v:false},
    {t:"理屈を超えた受容を生み出したい", v:false}, {t:"心をほぐすモノをつくる", v:false},
    {t:"私たちは、思っているよりも強くない", v:true}, {t:"出会ってしまったら、目の前で人のことを幸せにできたら、逃げられない、と思う。", v:false},
    {t:"頑張っている人たちの、ご褒美をつくりたい", v:false}, {t:"見栄という鎖を外す", v:false},
    {t:"大丈夫", v:false}, {t:"ワクワクハッピー！", v:false},
    {t:"好きな食べ物はエリンギ", v:false}, {t:"daijobu", v:false},
    {t:"走り出した先で見つけた、人生を懸けてやりたいこと。", v:false}, {t:"生きる、恋する、抱きしめる", v:false},
    {t:"それでもやりたい。", v:false}, {t:"らしさをもがくのは、もうやめた", v:false}
  ];

  const hero  = document.getElementById('hero');
  const title = document.getElementById('hero-title');

  const placed = [];

  function collide(r1, r2, pad = 10){
    return !(
      r1.right + pad < r2.left ||
      r1.left  - pad > r2.right ||
      r1.bottom+ pad < r2.top ||
      r1.top   - pad > r2.bottom
    );
  }
  function rand(min, max){ return min + Math.random() * (max - min); }

  function rectInHero(el){
    const hb = hero.getBoundingClientRect();
    const b  = el.getBoundingClientRect();
    return {
      left: b.left - hb.left,
      top: b.top - hb.top,
      right: b.right - hb.left,
      bottom: b.bottom - hb.top
    };
  }

  function getTitleRect(){
    const hb = hero.getBoundingClientRect();
    const tb = title.getBoundingClientRect();
    return {
      left: tb.left - hb.left,
      top: tb.top - hb.top,
      right: tb.right - hb.left,
      bottom: tb.bottom - hb.top
    };
  }

  // ★ここが重要：w を受け取る
  function place(el, w){
    hero.appendChild(el);

    const hb = hero.getBoundingClientRect();
    const titleRect = getTitleRect();
    const margin = 24;

    // 長文は小さく薄く（表示密度UP）
    if (w.t.length > 18) {
      el.style.fontSize = "0.75rem";
      el.style.opacity = 0.35;
    }

    for(let attempt=0; attempt<260; attempt++){
      const x = rand(margin, hb.width - margin);
      const y = rand(margin, hb.height - margin * 1.6);

      el.style.left = x + "px";
      el.style.top  = y + "px";

      const r = rectInHero(el);

      if (collide(r, titleRect, 28)) continue;

      let hit = false;
      for(const p of placed){
        if (collide(r, p, 8)) { hit = true; break; }
      }
      if (hit) continue;

      placed.push(r);
      return true;
    }

    // 最終保険
    el.style.opacity = 0.18;
    placed.push(rectInHero(el));
    return false;
  }

  // 既存の浮遊文字を消してから再生成（リロード/戻る対策）
  hero.querySelectorAll('.floating-text').forEach(n => n.remove());

  words.forEach(w => {
    // たまに縦文字を減らしたい場合はここで調整
    // if (w.v && Math.random() < 0.3) return;

    const el = document.createElement('div');
    el.className = 'floating-text' + (w.v ? ' vertical' : '');
    el.innerText = w.t;

    // 기본サイズ
    el.style.fontSize = (0.85 + Math.random() * 0.7) + 'rem';

    place(el, w); // ★ここも w を渡す
  });

  // 既存関数
  function openPopup(t, p) {
    document.getElementById('popup-title').innerText = t;
    document.getElementById('popup-text').innerText = p;
    document.getElementById('popup').style.display = 'flex';
  }
  function closePopup() { document.getElementById('popup').style.display = 'none'; }
  function setTheme(t) { document.body.className = t==='default'?'':'theme-'+t; }

  // HTMLのonclickから呼べるように
  window.openPopup = openPopup;
  window.closePopup = closePopup;
    window.setTheme = setTheme;
</script>

<div class="brand-modal" id="brandModal" aria-hidden="true">
  <div class="brand-modal__backdrop" data-close></div>

  <div class="brand-modal__panel" role="dialog" aria-modal="true" aria-labelledby="brandModalTitle">
    <button class="brand-modal__close" type="button" data-close aria-label="閉じる">×</button>

    <h3 class="brand-modal__title" id="brandModalTitle"></h3>

    <div class="brand-modal__body">
      <p class="brand-modal__desc" id="brandModalDesc"></p>
      <p class="brand-modal__process" id="brandModalProcess"></p>
    </div>
  </div>
</div>

<!-- 簡易CMS（ポップアップで追加のみ） -->
<% if (isAdmin) { %>
<div class="brand-modal" id="cmsModal" aria-hidden="true">
  <div class="brand-modal__backdrop" data-close></div>
  <div class="brand-modal__panel admin-modal__panel" role="dialog" aria-modal="true" aria-labelledby="cmsModalTitle">
    <button class="brand-modal__close" type="button" data-close aria-label="閉じる">×</button>
    <h3 class="brand-modal__title" id="cmsModalTitle">ブランドを追加</h3>
    <form id="cmsForm" class="admin-form">
      <div class="admin-field">
        <label>タイトル</label>
        <input name="title" required>
      </div>
      <div class="admin-field">
        <label>タグ</label>
        <input name="tag">
      </div>
      <div class="admin-field">
        <label>日付</label>
        <input name="date" placeholder="2026-01-27">
      </div>
      <div class="admin-field">
        <label>画像URL</label>
        <input name="image_url" placeholder="https://...">
      </div>
      <div class="admin-field">
        <label>説明（ポップアップ用）</label>
        <textarea name="description" rows="2"></textarea>
      </div>
      <div class="admin-field">
        <label>本文（プロセス・学びなど）</label>
        <textarea name="content" rows="3"></textarea>
      </div>
      <div class="admin-field">
        <label>学び / 今</label>
        <textarea name="learning" rows="2"></textarea>
      </div>
      <div class="admin-actions">
        <button type="submit" class="submit-btn">追加する</button>
        <span class="admin-status" id="cmsStatus"></span>
      </div>
    </form>

    <div class="admin-divider"></div>
    <div class="admin-delete">
      <h4 class="admin-delete__title">既存ブランドを削除</h4>
      <div class="admin-delete__hint">不要になったカードを選んで削除できます。</div>
      <div class="admin-delete__list" id="cmsDeleteList">
        <% if (projects.length === 0) { %>
          <p class="admin-delete__empty">まだブランドがありません。</p>
        <% } %>
        <% projects.forEach(p => { %>
          <div class="admin-delete__item">
            <div>
              <div class="admin-delete__name"><%= p.title %></div>
              <div class="admin-delete__meta"><%= p.tag %> <%= p.date %></div>
            </div>
            <button type="button" class="admin-delete__btn" data-id="<%= p.id %>">削除</button>
          </div>
        <% }) %>
      </div>
    </div>
  </div>
</div>
<% } %>

<script src="/js/main.js"></script>
</body>

</html>
